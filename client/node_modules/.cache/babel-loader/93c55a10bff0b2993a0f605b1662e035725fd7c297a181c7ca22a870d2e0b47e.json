{"ast":null,"code":"import _toConsumableArray from\"C:/Users/vaibv/Desktop/Projects/chat-app/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/vaibv/Desktop/Projects/chat-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useRef}from'react';import ChatBar from'./ChatBar';import ChatBody from'./ChatBody';import ChatFooter from'./ChatFooter';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatPage=function ChatPage(_ref){var socket=_ref.socket;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),typingStatus=_useState4[0],setTypingStatus=_useState4[1];var lastMessageRef=useRef(null);useEffect(function(){socket.on(\"messageResponse\",function(data){return setMessages([].concat(_toConsumableArray(messages),[data]));});},[socket,messages]);useEffect(function(){socket.on(\"typingResponse\",function(data){return setTypingStatus(data);});},[socket]);useEffect(function(){var _lastMessageRef$curre;// üëáÔ∏è scroll to bottom every time messages change\n(_lastMessageRef$curre=lastMessageRef.current)===null||_lastMessageRef$curre===void 0?void 0:_lastMessageRef$curre.scrollIntoView({behavior:'smooth'});},[messages]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chat\",children:[/*#__PURE__*/_jsx(ChatBar,{socket:socket}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat__main\",children:[/*#__PURE__*/_jsx(ChatBody,{messages:messages,typingStatus:typingStatus,lastMessageRef:lastMessageRef}),/*#__PURE__*/_jsx(ChatFooter,{socket:socket})]})]});};export default ChatPage;","map":{"version":3,"names":["React","useEffect","useState","useRef","ChatBar","ChatBody","ChatFooter","jsx","_jsx","jsxs","_jsxs","ChatPage","_ref","socket","_useState","_useState2","_slicedToArray","messages","setMessages","_useState3","_useState4","typingStatus","setTypingStatus","lastMessageRef","on","data","concat","_toConsumableArray","_lastMessageRef$curre","current","scrollIntoView","behavior","className","children"],"sources":["C:/Users/vaibv/Desktop/Projects/chat-app/client/src/components/ChatPage.js"],"sourcesContent":["import React, { useEffect, useState, useRef} from 'react'\r\nimport ChatBar from './ChatBar'\r\nimport ChatBody from './ChatBody'\r\nimport ChatFooter from './ChatFooter'\r\n\r\nconst ChatPage = ({socket}) => { \r\n  const [messages, setMessages] = useState([])\r\n  const [typingStatus, setTypingStatus] = useState(\"\")\r\n  const lastMessageRef = useRef(null);\r\n\r\n  useEffect(()=> {\r\n    socket.on(\"messageResponse\", data => setMessages([...messages, data]))\r\n  }, [socket, messages])\r\n\r\n  useEffect(()=> {\r\n    socket.on(\"typingResponse\", data => setTypingStatus(data))\r\n  }, [socket])\r\n\r\n  useEffect(() => {\r\n    // üëáÔ∏è scroll to bottom every time messages change\r\n    lastMessageRef.current?.scrollIntoView({behavior: 'smooth'});\r\n  }, [messages]);\r\n\r\n  return (\r\n    <div className=\"chat\">\r\n      <ChatBar socket={socket}/>\r\n      <div className='chat__main'>\r\n        <ChatBody messages={messages} typingStatus={typingStatus} lastMessageRef={lastMessageRef}/>\r\n        <ChatFooter socket={socket}/>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ChatPage"],"mappings":"kRAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,MAAM,KAAO,OAAO,CACzD,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,MAAO,CAAAC,QAAQ,KAAM,YAAY,CACjC,MAAO,CAAAC,UAAU,KAAM,cAAc,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAErC,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAAC,IAAA,CAAiB,IAAZ,CAAAC,MAAM,CAAAD,IAAA,CAANC,MAAM,CACvB,IAAAC,SAAA,CAAgCZ,QAAQ,CAAC,EAAE,CAAC,CAAAa,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAArCG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5B,IAAAI,UAAA,CAAwCjB,QAAQ,CAAC,EAAE,CAAC,CAAAkB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA7CE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IACpC,GAAM,CAAAG,cAAc,CAAGpB,MAAM,CAAC,IAAI,CAAC,CAEnCF,SAAS,CAAC,UAAK,CACbY,MAAM,CAACW,EAAE,CAAC,iBAAiB,CAAE,SAAAC,IAAI,QAAI,CAAAP,WAAW,IAAAQ,MAAA,CAAAC,kBAAA,CAAKV,QAAQ,GAAEQ,IAAI,EAAC,CAAC,GAAC,CACxE,CAAC,CAAE,CAACZ,MAAM,CAAEI,QAAQ,CAAC,CAAC,CAEtBhB,SAAS,CAAC,UAAK,CACbY,MAAM,CAACW,EAAE,CAAC,gBAAgB,CAAE,SAAAC,IAAI,QAAI,CAAAH,eAAe,CAACG,IAAI,CAAC,GAAC,CAC5D,CAAC,CAAE,CAACZ,MAAM,CAAC,CAAC,CAEZZ,SAAS,CAAC,UAAM,KAAA2B,qBAAA,CACd;AACA,CAAAA,qBAAA,CAAAL,cAAc,CAACM,OAAO,UAAAD,qBAAA,iBAAtBA,qBAAA,CAAwBE,cAAc,CAAC,CAACC,QAAQ,CAAE,QAAQ,CAAC,CAAC,CAC9D,CAAC,CAAE,CAACd,QAAQ,CAAC,CAAC,CAEd,mBACEP,KAAA,QAAKsB,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBzB,IAAA,CAACJ,OAAO,EAACS,MAAM,CAAEA,MAAO,CAAC,CAAC,cAC1BH,KAAA,QAAKsB,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBzB,IAAA,CAACH,QAAQ,EAACY,QAAQ,CAAEA,QAAS,CAACI,YAAY,CAAEA,YAAa,CAACE,cAAc,CAAEA,cAAe,CAAC,CAAC,cAC3Ff,IAAA,CAACF,UAAU,EAACO,MAAM,CAAEA,MAAO,CAAC,CAAC,EAC1B,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAF,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}